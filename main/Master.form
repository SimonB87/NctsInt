<?xml version="1.0" encoding="utf-8"?>
<?data-format version="0.400"?>
<Form>
  <Name value="Master" />
  <Caption value="Master" />
  <Content>
    <Panel>
      <Name value="MasterPnl" />
      <Orientation value="Vertical" />
      <Panel.Height value="#" />
      <Panel.Width value="*" />
      <Children>
        <Panel>
          <Name value="HeaderPnl" />
          <Orientation value="Horizontal" />
          <Panel.Height value="#" />
          <Panel.Width value="*" />
          <Children>
            <Panel>
              <Name value="_BlankPnl" />
              <Orientation value="Horizontal" />
              <Panel.Height value="#" />
              <Panel.Width value="270px" />
              <CssClass>
                <CssClassConditional>
                  <ClassName value="{theme}-panel" />
                  <IsThemedStyle value="True" />
                </CssClassConditional>
              </CssClass>
            </Panel>
            <Panel>
              <Name value="LeftPnl" />
              <Orientation value="Horizontal" />
              <Panel.Height value="#" />
              <Panel.Width value="20%" />
              <CssClass>
                <CssClassConditional>
                  <ClassName value="{theme}-panel" />
                  <IsThemedStyle value="True" />
                </CssClassConditional>
              </CssClass>
            </Panel>
            <Panel>
              <Name value="MiddlePnl" />
              <Orientation value="Vertical" />
              <Panel.Height value="#" />
              <Panel.Width value="50%" />
              <Children>
                <Label>
                  <Name value="label1" />
                  <Data value="NCTS Internal klient - Montenegro" />
                  <Heading value="h2" />
                  <Panel.Height value="#" />
                  <Panel.HorizontalAlignment value="Center" />
                  <Panel.Width value="*" />
                  <OnClick>
                    <ActionEvent ReferencedAction="~handler_label1_OnClick" />
                  </OnClick>
                  <CssClass>
                    <CssClassConditional>
                      <ClassName value="{theme}-label" />
                      <IsThemedStyle value="True" />
                    </CssClassConditional>
                    <CssClassConditional>
                      <ClassName value="clickable" />
                    </CssClassConditional>
                  </CssClass>
                </Label>
                <Label>
                  <Name value="appVersion" />
                  <Panel.Height value="#" />
                  <Panel.HorizontalAlignment value="Center" />
                  <Panel.Width value="50%" />
                  <Bindings>
                    <Binding SourceProperty="Data" Expression="form.appVersion" />
                  </Bindings>
                  <CssClass>
                    <CssClassConditional>
                      <ClassName value="{theme}-label" />
                      <IsThemedStyle value="True" />
                    </CssClassConditional>
                  </CssClass>
                </Label>
              </Children>
              <CssClass>
                <CssClassConditional>
                  <ClassName value="{theme}-panel" />
                  <IsThemedStyle value="True" />
                </CssClassConditional>
              </CssClass>
            </Panel>
            <Panel>
              <Name value="RightPnl" />
              <Orientation value="Vertical" />
              <Panel.Height value="#" />
              <Panel.Width value="30%" />
              <Children>
                <Panel>
                  <Name value="label2_parent" />
                  <Orientation value="Horizontal" />
                  <Panel.Height value="#" />
                  <Panel.Width value="*" />
                  <Children>
                    <Label>
                      <Name value="label4" />
                      <Data value="CO: ME123456" />
                      <Heading value="h5" />
                      <Margin value="2, 6, 2, 6 px" />
                      <Panel.Height value="#" />
                      <Panel.Width value="40%" />
                      <CssClass>
                        <CssClassConditional>
                          <ClassName value="{theme}-label" />
                          <IsThemedStyle value="True" />
                        </CssClassConditional>
                      </CssClass>
                    </Label>
                    <Label>
                      <Name value="label_authentificatedText" />
                      <Panel.Height value="#" />
                      <Panel.Width value="150px" />
                      <Bindings>
                        <Binding SourceProperty="IsVisible" Expression="globals.loginResponse.hasValue()" />
                        <Binding SourceProperty="Data" Expression="form.uiState.authentificatedLabel" />
                      </Bindings>
                      <CssClass>
                        <CssClassConditional>
                          <ClassName value="{theme}-label" />
                          <IsThemedStyle value="True" />
                        </CssClassConditional>
                      </CssClass>
                    </Label>
                  </Children>
                  <CssClass>
                    <CssClassConditional>
                      <ClassName value="{theme}-panel" />
                      <IsThemedStyle value="True" />
                    </CssClassConditional>
                  </CssClass>
                </Panel>
                <Panel>
                  <Name value="panel2" />
                  <Orientation value="Horizontal" />
                  <Panel.Height value="#" />
                  <Panel.Width value="*" />
                  <Children>
                    <Label>
                      <Name value="label32" />
                      <Data value="Role: Read, Files, Write, Reactivation" />
                      <Heading value="h5" />
                      <Margin value="2, 6, 2, 6 px" />
                      <Panel.Height value="#" />
                      <Panel.Width value="*" />
                      <CssClass>
                        <CssClassConditional>
                          <ClassName value="{theme}-label" />
                          <IsThemedStyle value="True" />
                        </CssClassConditional>
                      </CssClass>
                    </Label>
                    <Label>
                      <Name value="label_mode" />
                      <Panel.Height value="#" />
                      <Panel.Width value="*" />
                      <Bindings>
                        <Binding SourceProperty="Data" Expression="globals.globalUiState.userModeLabel" />
                      </Bindings>
                      <CssClass>
                        <CssClassConditional>
                          <ClassName value="{theme}-label" />
                          <IsThemedStyle value="True" />
                        </CssClassConditional>
                      </CssClass>
                    </Label>
                  </Children>
                  <CssClass>
                    <CssClassConditional>
                      <ClassName value="{theme}-panel" />
                      <IsThemedStyle value="True" />
                    </CssClassConditional>
                  </CssClass>
                </Panel>
              </Children>
              <CssClass>
                <CssClassConditional>
                  <ClassName value="{theme}-panel" />
                  <IsThemedStyle value="True" />
                </CssClassConditional>
                <CssClassConditional>
                  <ClassName value="flright" />
                </CssClassConditional>
              </CssClass>
            </Panel>
          </Children>
          <CssClass>
            <CssClassConditional>
              <ClassName value="{theme}-panel" />
              <IsThemedStyle value="True" />
            </CssClassConditional>
            <CssClassConditional>
              <ClassName value="{theme}-header" />
              <IsThemedStyle value="True" />
            </CssClassConditional>
          </CssClass>
        </Panel>
        <Panel>
          <Name value="BodyPnl" />
          <Orientation value="Vertical" />
          <Panel.Height value="#" />
          <Panel.Width value="*" />
          <Children>
            <BusyIndicator identity="busyIndicator.4a8ce8836eb04d7bbc155c7119f0193e">
              <Name value="busyIndicatorPage" />
              <Panel.Height value="#" />
              <Panel.Width value="*" />
              <Bindings>
                <Binding SourceProperty="IsVisible" Expression="globals.busyIndicatorIsRunning" />
              </Bindings>
            </BusyIndicator>
            <Panel>
              <Name value="FormPlaceHolderPnl" />
              <Orientation value="Horizontal" />
              <Panel.Height value="#" />
              <Panel.Width value="*" />
              <Children>
                <FormPlaceholder>
                  <Name value="formPlaceholder" />
                  <InitialForm reference="+UiParts.DecList" />
                  <Panel.Height value="#" />
                  <Panel.Width value="*" />
                </FormPlaceholder>
              </Children>
              <CssClass>
                <CssClassConditional>
                  <ClassName value="{theme}-panel" />
                  <IsThemedStyle value="True" />
                </CssClassConditional>
              </CssClass>
            </Panel>
            <Panel>
              <Name value="panel1" />
              <Orientation value="Horizontal" />
              <Panel.Height value="#" />
              <Panel.Width value="*" />
              <Children>
                <GrowlNotification identity="Notifications.7ff832fd4a2b4377bafd2e81a99bbcfc">
                  <Name value="growlNotification" />
                  <controller reference="+GlobalApiObjects.notificationsCtrl" />
                  <displayTime value="6000" />
                  <iconClassClose value="fa fa-times" />
                  <iconClassError value="fa fa-exclamation" />
                  <iconClassInfo value="fa fa-info-circle" />
                  <iconClassSuccess value="fa fa-check-circle" />
                  <iconClassWarning value="fa fa-exclamation-triangle" />
                  <Panel.Height value="#" />
                  <Panel.Width value="*" />
                </GrowlNotification>
                <NotificationPanel identity="Notifications.7ff832fd4a2b4377bafd2e81a99bbcfc">
                  <Name value="notificationPanel" />
                  <controller reference="+GlobalApiObjects.notificationsCtrl" />
                  <iconClassClose value="fa fa-times" />
                  <iconClassDisplayGrowlNotifications value="fa fa-eye" />
                  <iconClassError value="fa fa-exclamation" />
                  <iconClassInfo value="fa fa-info-circle" />
                  <iconClassSuccess value="fa fa-check-circle" />
                  <iconClassWarning value="fa fa-exclamation-triangle" />
                  <Panel.Height value="#" />
                  <Panel.Width value="*" />
                </NotificationPanel>
              </Children>
              <CssClass>
                <CssClassConditional>
                  <ClassName value="{theme}-panel" />
                  <IsThemedStyle value="True" />
                </CssClassConditional>
              </CssClass>
            </Panel>
          </Children>
          <CssClass>
            <CssClassConditional>
              <ClassName value="{theme}-panel" />
              <IsThemedStyle value="True" />
            </CssClassConditional>
          </CssClass>
        </Panel>
      </Children>
      <CssClass>
        <CssClassConditional>
          <ClassName value="{theme}-panel" />
          <IsThemedStyle value="True" />
        </CssClassConditional>
        <CssClassConditional>
          <ClassName value="{theme}-padding-right" />
          <IsThemedStyle value="True" />
        </CssClassConditional>
      </CssClass>
    </Panel>
  </Content>
  <DataContext>
    <DataContext>
      <Children>
        <Attribute>
          <Name value="appVersion" />
          <Caption value="App version" />
          <DeclaredType>
            <AttributeType />
          </DeclaredType>
        </Attribute>
        <Complex>
          <Name value="uiState" />
          <Caption value="Ui state" />
          <Children>
            <Computed>
              <Name value="authentificatedLabel" />
              <Caption value="Authentificated label" />
              <Expression IsValid="True">
                <ExpressionText><![CDATA[globals.loginResponse.hasValue() ? "Authentificated" : "Not authentificated"]]></ExpressionText>
                <ResultType>
                  <BaseType value="String" />
                </ResultType>
              </Expression>
            </Computed>
          </Children>
        </Complex>
      </Children>
    </DataContext>
  </DataContext>
  <OnActivate>
    <ActionEvent ReferencedAction="~scrollMenu" />
  </OnActivate>
  <OnCreate>
    <ActionEvent ReferencedAction="~init" />
  </OnCreate>
  <Actions>
    <ActionBlock>
      <Name value="init" />
      <ActionLangBody IsValid="True">
        <Script><![CDATA[packages.cseForms.apiobjects.prototypeCodelist.fillFromJson("[{\"Key\": \"A\", \"Description\": \"prototype item\"}]")

globals.isExpandedCollapsibleStickyPnl = false

// TODO: Replace with data from server once we have it
globals.serverConfig.TPendDate = toDate("2024-12-31", defaultDate())
globals.serverConfig.communicationLanguageAtDeparture = "Montenegro"

form.appVersion = apiobjects.appVersion.get()


//TODO - nahradit za naši správnou verzi, jakmile to CIC podporovat!
//apiobjects.CIC.setVersion("1.00.00" ) 
//apiobjects.CIC.setVersion("1.00.05" )//Verze 1.00.05 je podle DušanaM.
apiobjects.CIC.setVersion("0.0.0") // Diddy v centru očekává

//TODO - dosadit vybraný CO
var selectedCo = "ME123456"
apiobjects.CIC.setHeader("X-CustomsOffice", selectedCo)

//Customs office of ME in db :
//ME123456    Carinarnica Podgorica		Capital Town
//ME123450    Aerodromi Podgorica		Capital Town - Airport
//ME123457    Carinarnica Kotor			Sea Port]]></Script>
      </ActionLangBody>
      <DataContext>
        <ActionDataContext />
      </DataContext>
    </ActionBlock>
    <ActionBlock>
      <Name value="hideCollapsibleMenuOnMaster" />
      <ActionLangBody IsValid="True">
        <Script><![CDATA[globals.isExpandedCollapsibleStickyPnl = false]]></Script>
      </ActionLangBody>
      <DataContext>
        <ActionDataContext />
      </DataContext>
    </ActionBlock>
    <ActionBlock>
      <Name value="scrollMenu" />
      <IsJavascript value="True" />
      <Script><![CDATA[window.onscroll = function() {setStickyMenu()};

function setStickyMenu() {
  if (document.body.scrollTop > 95 || document.documentElement.scrollTop > 95) {
    document.getElementsByTagName("html")[0].className = "scrolled";
  }else{
    document.getElementsByTagName("html")[0].className = "";
  }
}]]></Script>
      <ActionLangBody IsValid="True" />
      <DataContext>
        <ActionDataContext />
      </DataContext>
    </ActionBlock>
    <ActionBlock>
      <Name value="handler_label1_OnClick" />
      <IsPrivate value="True" />
      <ActionLangBody IsValid="True">
        <Script><![CDATA[navigation.main.Declist.go()]]></Script>
      </ActionLangBody>
      <DataContext>
        <ActionDataContext />
      </DataContext>
    </ActionBlock>
  </Actions>
</Form>